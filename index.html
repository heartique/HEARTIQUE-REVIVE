<!DOCTYPE html>
<html lang="en">
<head>
  <!-- üåô Dark/Light Theme Setup -->
  <script>
    const savedTheme = localStorage.getItem("theme");
    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    const theme = savedTheme || (prefersDark ? "dark" : "light");
    document.documentElement.setAttribute("data-theme", theme);
  </script>

  <!-- ‚öô Basic Meta -->
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- üîç SEO -->
  <title>Heartique Nexus Dashboard</title>
  <meta name="description" content="The ultimate dashboard for Heartique Nursing Nexus ‚Äì study tools, updates, and essential nursing resources.">
  <meta name="keywords" content="nursing, notes, dashboard, CHK, Heartique nursing nexus alliance, study, PTS, Kenya">
  <meta name="author" content="Heartique Nursing Nexus Team">
  <meta name="robots" content="index, follow">

  <!-- üåê Open Graph -->
  <meta property="og:title" content="Heartique Nursing Nexus Dashboard">
  <meta property="og:description" content="Your go-to platform for nursing tools, updates, and notes.">
  <meta property="og:image" content="icon-512.png">
  <meta property="og:url" content="https://heartique.github.io/HEARTIQUE-NEXUS-NURSES-ALLIANCE/">
  <meta property="og:type" content="website">

  <!-- üê¶ Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Heartique Nursing Nexus Dashboard">
  <meta name="twitter:description" content="Your essential nursing study portal ‚Äì accessible, simple, powerful.">
  <meta name="twitter:image" content="icon-512.png">

  <!-- üì∑ Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="apple-touch-icon" href="icon-192.png">

  <!-- üß≠ Manifest + PWA Meta -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#004a99">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('https://raw.githubusercontent.com/heartique/HEARTIQUE-NEXUS-NURSES-ALLIANCE/main/background4.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background: #004a99;
      color: white;
      padding: 1rem 1.5rem;
      text-align: center;
      position: relative;
    }
    #logoutBtn {
      position: absolute;
      top: 1rem;
      right: 1.5rem;
      background: #e53935;
      color: white;
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
    }
    main {
      max-width: 1000px;
      margin: 1rem auto;
      padding: 1rem;
    }
    .welcome-msg {
      background: #e8f0fe;
      border-left: 6px solid #004a99;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 4px;
    }
    .welcome-msg p {
      font-size: 1.1rem;
    }
    .contact {
      font-size: 0.9rem;
      margin-top: 0.5rem;
      color: #555;
    }
    #searchBar {
      width: 100%;
      padding: 0.7rem 1rem;
      font-size: 1rem;
      margin-bottom: 1rem;
      border: 2px solid #004a99;
      border-radius: 4px;
      box-sizing: border-box;
    }
    section {
      background: white;
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      border-radius: 6px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.1);
    }
    section h2 {
      margin-top: 0;
      color: #004a99;
    }
    ul {
      list-style: none;
      padding-left: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    ul li {
      padding: 0.7rem 1rem;
      background: #e3e8ff;
      border-radius: 6px;
      cursor: pointer;
      flex: 1 1 calc(33.333% - 1rem);
      text-align: center;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
      transition: background 0.2s ease;
    }
    ul li:hover {
      background-color: #d6e0ff;
    }
    .tracker {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .tracker-item {
      flex: 1 1 120px;
      background: #e3e8ff;
      border-radius: 6px;
      padding: 0.7rem;
      text-align: center;
      cursor: pointer;
      user-select: none;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
    }
    .tracker-item.strong {
      background: #d4f5d4;
      border: 2px solid #4caf50;
      color: #2e7d32;
    }
    .tracker-item.fair {
      background: #fff7d1;
      border: 2px solid #fbc02d;
      color: #f57f17;
    }
    .tracker-item.weak {
      background: #ffd6d6;
      border: 2px solid #e53935;
      color: #b71c1c;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      padding: 1rem;
      color: #666;
    }

    /* Refresh Button */
    #refreshBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 9999;
      background: linear-gradient(to right, #004a99, #8000ff);
      color: white;
      border: none;
      border-radius: 50%;
      padding: 15px;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s ease;
    }
    #refreshBtn:hover {
      transform: scale(1.1);
    }
    #shockwave {
      position: fixed;
      bottom: 27px;
      right: 27px;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(128, 0, 255, 0.3);
      opacity: 0;
      z-index: 9998;
      pointer-events: none;
    }
  </style>
</head>

<body style="margin: 0; padding: 0; font-family: Arial, sans-serif;">

  <!-- üåä Ripple Effect Line -->
  <div id="rippleEffect" style="position: fixed; top: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(to right, #004a99, #8000ff); opacity: 0; transition: opacity 0.4s; z-index: 999;"></div>

  <!-- üîÑ Refresh Button -->
  <button id="refreshBtn" title="Refresh">üîÑ</button>
  <div id="shockwave"></div>

  <!-- üë§ Profile Section -->
  <div id="topBar" style="position: relative; display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: #f9f9f9;">
    <h1 style="color: #004a99;">MY PROFILE</h1>
    <button id="profileBtn" style="border-radius: 50%; background: #004a99; color: white; font-size: 1.2rem; border: none; width: 45px; height: 45px; cursor: pointer;">üë§</button>
  </div>

  <!-- Profile Modal -->
  <div id="profileModal" style="display: none; position: absolute; top: 70px; right: 2rem; background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.2); z-index: 1000; min-width: 220px;">
    <p><strong>Name:</strong> <span id="modalName">Loading...</span></p>
    <p><strong>Email:</strong> <span id="modalEmail">Loading...</span></p>
    <hr>
    <button onclick="deleteAccount()" style="background: red; color: white; border: none; padding: 0.5rem 1rem; margin-bottom: 0.5rem;">Delete Account</button>
    <button onclick="logout()" style="border: none; padding: 0.5rem 1rem;">Logout</button>
  </div>

  <!-- ‚ö†Ô∏è Confirm Modal -->
  <div id="confirmModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:2000;">
    <div style="background:white; padding:2rem; border-radius:10px; max-width:300px;">
      <h3 style="color:red;">Confirm Delete</h3>
      <p>Are you sure you want to delete this account?</p>
      <button id="confirmYes" style="background:red; color:white; margin:1rem;">Yes</button>
      <button id="confirmNo">Cancel</button>
    </div>
  </div>

  <!-- üîä Notification Sound -->
  <audio id="notifySound" src="notify.mp3" preload="auto"></audio>

  <header>
    <h1>WELCOME TO HEARTIQUE NURSING NEXUS PORTAL ‚ù§Ô∏è</h1>
  </header>

  <main>
    <div class="welcome-msg">
      <h1 id="greeting">Welcome!</h1>
      <p id="welcomeUser">We're glad to have you on the Heartique Nursing Nexus Alliance Portal üëã</p>
      <p>This is <strong>Heartique Nursing Nexus Alliance Portal</strong> ‚Äî a dedicated space for all nursing students in Kenya...</p>
      <p>Stay updated: <a href="https://whatsapp.com/channel/0029VbBFzgAEawdkJKtRtF2H" target="_blank">Join WhatsApp Channel</a></p>
      <input type="text" id="searchBar" placeholder="Search notes, papers, and activities..." />
    </div>

    <!-- üì¢ Noticeboard -->
    <section>
      <div id="noticeboard" style="background-color: #fff8dc; border-left: 6px solid #ffa500; padding: 12px 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
        <h3>üì¢ Noticeboard <span id="newBadge" style="color:red;display:none;">(New)</span></h3>
        <button id="toggleNotice">Show Notices</button>
        <ul id="notices" style="display:none; max-height:0; overflow:hidden;"></ul>
      </div>
    </section>

    <!-- üìö Notes Section -->
    <section>
      <h2>PTS & Block Notes</h2>
      <ul>
        <li onclick="location.href='pts.html'">PTS Revision Notes</li>
        <li onclick="location.href='block1.html'">Block 1 Notes</li>
        <li onclick="location.href='block2.html'">Block 2 Notes</li>
        <li onclick="location.href='block3.html'">Block 3 Notes</li>
        <li onclick="location.href='block4.html'">Block 4 Notes</li>
        <li onclick="location.href='block5.html'">Block 5 Notes</li>
        <li onclick="location.href='block6.html'">Block 6 Notes</li>
      </ul>
    </section>

    <!-- üî† Vocabulary Tabs -->
    <div class="custom-tab-container">
      <a href="vocabulary.html" class="custom-tab-card custom-tab-vocab">
        <div class="tab-icon">üìò</div>
        <div class="tab-content">
          <h2>NURSE WHISPERS</h2>
          <p>Most-used nursing & medical terms all in one place.</p>
          <span id="vocab-count" class="badge">Loading...</span>
        </div>
      </a>
      <a href="medicalabbreviations.html" class="custom-tab-card custom-tab-abbrev">
        <div class="tab-icon">‚öïÔ∏è</div>
        <div class="tab-content">
          <h2>MED ABBREVIATIONS</h2>
          <p>Essential medical abbreviations every nurse must know.</p>
          <span id="abbrev-count" class="badge">Loading...</span>
        </div>
      </a>
    </div>

    <!-- üéØ Core Objectives -->
    <section>
      <h2>üéØ Core Objectives for Nursing Students</h2>
      <ul>
        <li onclick="location.href='objectives.html'">üìò Nursing Study Objectives</li>
      </ul>
    </section>

    <!-- üìö Books -->
    <section>
      <h2>üìö Very Important Books & Materials</h2>
      <ul>
        <li onclick="location.href='clinical-manual.html'">üìö <strong>Ultimate Nursing PowerPack</strong></li>
        <li onclick="location.href='exam-secrets.html'">üîê NCK Exam Secrets & Hacks</li>
      </ul>
    </section>

    <!-- üìò Revision Papers -->
    <section>
      <h2>Past Revision Papers</h2>
      <ul>
        <li onclick="location.href='pts-revision.html'">üìö PTS Revision Portal</li>
        <li onclick="location.href='block1-revision.html'">üìö Block 1 Revision Portal</li>
        <li onclick="location.href='block2-revision.html'">üìö Block 2 Revision Portal</li>
        <li onclick="location.href='block3-revision.html'">üìö Block 3 Revision Portal</li>
        <li onclick="location.href='block4-revision.html'">üìö Block 4 Revision Portal</li>
        <li onclick="location.href='block5-revision.html'">üìö Block 5 Revision Portal</li>
        <li onclick="location.href='block6-revision.html'">üìö Block 6 Revision Portal</li>
        <li class="main-FQE-paper" onclick="location.href='FQE1.html'">‚ú® <strong>FQE Paper 1</strong></li>
        <li class="main-FQE-paper" onclick="location.href='FQE2.html'">‚ú® <strong>FQE Paper 2</strong></li>
        <li class="main-nck-paper" onclick="location.href='nck-paper1.html'">‚ú® <strong>NCK Paper 1</strong></li>
        <li class="main-nck-paper" onclick="location.href='nck-paper2.html'">‚ú® <strong>NCK Paper 2</strong></li>
      </ul>
    </section>


<section class="quiz-tools-section">
  <h2 class="section-title">üß† Study Tools Zone</h2>

  <div class="quiz-tab-container">
    <!-- Quiz Tab -->
    <a href="quiz.html" class="quiz-tab-card quiz-tab-quiz">
      <div class="tab-icon">üìù</div>
      <div class="tab-content">
        <h2>HEARTIQUE QUIZZES APPü´°</h2>
        <p>Test your knowledge with instant feedback & scores.</p>
      </div>
    </a>
    <!-- üåü REAL NCK SIM TAB START -->
<div style="background:#fff3cd; padding:20px; border-radius:15px; margin:20px auto; max-width:600px; box-shadow:0 2px 10px rgba(0,0,0,0.2); text-align:center;">
  <h2 style="color:#b7791f;">üß™ Heartique  NCK Profectus Simulator</h2>
  <p style="font-style:italic; color:#4e4e4e;">Practice like it's the real thing. Full CBT mode with timer, question flagging, and scoring.</p>
  <a href="REALNCK.html" style="display:inline-block; margin-top:15px; background:#f6c90e; color:black; font-weight:bold; padding:12px 24px; border-radius:8px; text-decoration:none; font-size:18px; transition:0.3s;">
    üöÄ Launch NCK Exam Simulator
  </a>
</div>
<!-- üåü REAL NCK SIM TAB END -->


    <!-- Terms Tab -->
    <a href="terms.html" class="quiz-tab-card quiz-tab-terms">
      <div class="tab-icon">üìò</div>
      <div class="tab-content">
        <h2>Terms & Tricks</h2>
        <p>Explore essential medical terms and smart nursing tricks, explained simply.</p>
      </div>
    </a>
    <!-- Image Study Tab -->
<a href="imagestudys.html" class="quiz-tab-card quiz-tab-terms">
  <div class="tab-icon">üñºÔ∏è</div>
  <div class="tab-content">
    <h2>MEDICAL CONCEPT GALLERY</h2>
    <p>Visualize key nursing & medical units with clean image tabs.</p>
  </div>
</a>
  </div>

  <div class="tools-coming-banner">üí° More tools coming soon...</div>
  <div class="tools-suggest-link">
  <a href="https://wa.me/254717517371?text=Hi!%20I'd%20love%20to%20suggest%20a%20feature%20for%20Heartique..." target="_blank">
  + Suggest a feature</a>
  </div>
</section>

      
    <section>
      <h2>Co-curricular Activities</h2>
      <ul id="activitiesList">
        <li onclick="location.href='football.html'">Football</li>
        <li onclick="location.href='athletics.html'">Athletics</li>
        <li onclick="location.href='volleyball.html'">Volleyball</li>
        <li onclick="location.href='basketball.html'">Basketball</li>

        <li onclick="location.href='chess.html'">Chess</li>
        
      </ul>
    </section>
  <section id="understandingTracker" style="margin: 40px auto; max-width: 800px; font-family: Arial, sans-serif;">
  <h2 style="text-align: center;">‚≠ê Understanding Tracker</h2>
  <p style="text-align: center; margin-bottom: 30px;">Rate your understanding of each topic or block below:</p>

  <div class="tracker-item">
    <h3>PTS (Professional Training Skills)</h3>
    <div class="stars" data-topic="PTS"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 1</h3>
    <div class="stars" data-topic="Block 1"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 2</h3>
    <div class="stars" data-topic="Block 2"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 3</h3>
    <div class="stars" data-topic="Block 3"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 4</h3>
    <div class="stars" data-topic="Block 4"></div>
  </div>

  <div class="tracker-item">
    <h3>Block 5</h3>
    <div class="stars" data-topic="Block 5"></div>
  </div>
</section>

<style>
  .main-vip-books {
  background: linear-gradient(135deg, #0d47a1, #1565c0);
  color: #fff;
  font-weight: 900;
  font-size: 1.1rem;
  border-radius: 16px;
  border: 3px solid #90caf9;
  box-shadow: 0 0 15px rgba(21, 101, 192, 0.4);
  text-align: center;
  flex: 1 1 100%;
  padding: 1.5rem 1rem;
  transition: all 0.3s ease;
}
.main-vip-books:hover {
  background: linear-gradient(135deg, #1976d2, #1e88e5);
  transform: scale(1.04);
  box-shadow: 0 0 20px rgba(21, 101, 192, 0.7);
}
  .main-objective-tab {
  background: linear-gradient(135deg, #4a148c, #880e4f);
  color: #fff;
  font-weight: 900;
  font-size: 1.4rem;
  border-radius: 18px;
  border: 4px solid #ce93d8;
  box-shadow: 0 0 20px rgba(136, 14, 79, 0.4);
  text-align: center;
  flex: 1 1 100%;
  padding: 2rem 1rem;
  margin-top: 1rem;
  margin-bottom: 1rem;
  transition: all 0.3s ease;
}

.main-objective-tab:hover {
  background: linear-gradient(135deg, #6a1b9a, #ad1457);
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(136, 14, 79, 0.7);
}

  .tracker-item {
         font-family: Arial, sans-serif;
  background-color: #f5f5f5
  margin: 0;
  padding: 0;
  color: #333;
  }

  .stars {
    font-size: 24px;
    display: flex;
    gap: 10px;
    cursor: pointer;
  }

  .star {
    color: #ccc;
    transition: color 0.2s ease;
  }
  .star.filled {
    color: #ffc107;
  }

  /* üåü Section wrapper */
.quiz-tools-section {
  background-color: #f8f9fc;
  border-radius: 16px;
  padding: 32px 20px;
  margin: 40px auto;
  max-width: 1200px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
}

/* üß† Section title */
.section-title {
  font-size: 1.6rem;
  font-weight: 700;
  text-align: center;
  margin-bottom: 24px;
  color: #1f2937; /* Slate gray */
}

/* üì¶ Tab container layout */
.quiz-tab-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-bottom: 20px;
}

/* üß© Individual tab cards */
.quiz-tab-card {
  flex: 1 1 260px;
  max-width: 320px;
  display: block;
  border-radius: 14px;
  padding: 20px;
  text-decoration: none;
  min-height: 160px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: slideInQuiz 0.7s ease both;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  color: #fff;
}

/* üíö Background colors */
.quiz-tab-quiz {
  background-color: #0b2e8a !important; /* Teal */
}

.quiz-tab-terms {
  background-color: #4b0082 !important; /* Violet */
}

/* üîÅ Hover effect */
.quiz-tab-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
}

/* üé® Force all text white */
.quiz-tab-card h2,
.quiz-tab-card p,
.quiz-tab-card .tab-icon {
  color: #fff !important;
}

/* üß± Content layout */
.tab-icon {
  font-size: 1.8rem;
  margin-bottom: 8px;
}
.tab-content h2 {
  margin: 0 0 4px;
  font-size: 1.2rem;
  font-weight: 600;
}
.tab-content p {
  margin: 0;
  font-size: 0.88rem;
  font-weight: 400;
  line-height: 1.3;
}

/* üéû Slide-in animation */
@keyframes slideInQuiz {
  from {
    opacity: 0;
    transform: translateX(40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* üì± Responsive */
@media (max-width: 768px) {
  .quiz-tab-container {
    flex-direction: column;
    align-items: center;
  }

  .quiz-tab-card {
    width: 90%;
    max-width: 360px;
  }
}

/* üí° Coming soon banner */
.tools-coming-banner {
  text-align: center;
  font-size: 1rem;
  color: #6b7280;
  margin-top: 10px;
  font-style: italic;
}

/* üîó Suggest link */
.tools-suggest-link {
  text-align: center;
  margin-top: 10px;
}
.tools-suggest-link a {
  color: #2563eb;
  font-size: 0.9rem;
  text-decoration: none;
  font-weight: 600;
}
.tools-suggest-link a:hover {
  text-decoration: underline;
}

</style>
<script>
  const topics = document.querySelectorAll(".stars");

  topics.forEach(starBlock => {
    const topicKey = starBlock.getAttribute("data-topic");
    const savedRating = localStorage.getItem("rating-" + topicKey) || 0;

    for (let i = 1; i <= 5; i++) {
      const star = document.createElement("span");
      star.classList.add("star");
      star.innerHTML = "‚òÖ";
      if (i <= savedRating) star.classList.add("filled");

      star.addEventListener("click", () => {
        localStorage.setItem("rating-" + topicKey, i);
        updateStars(starBlock, i);
      });

      starBlock.appendChild(star);
    }
  });

  function updateStars(container, rating) {
    const stars = container.querySelectorAll(".star");
    stars.forEach((star, idx) => {
      star.classList.toggle("filled", idx < rating);
    });
  }
  </script>
      <!-- Install App Button -->
<button id="installApp"
  style="display:none;position:fixed;bottom:20px;left:20px;padding:12px 18px;background:#004a99;color:white;border:none;border-radius:12px;font-weight:bold;box-shadow:0 4px 10px rgba(0,0,0,0.2);z-index:999;">
  üì≤ Install Portal
</button>

<!-- Install App Script -->
<script>
  let deferredPrompt;
  const installButton = document.getElementById('installApp');

  // Check if already installed (standalone mode)
  const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
  if (!isStandalone) {
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installButton.style.display = 'block';

      installButton.addEventListener('click', () => {
        installButton.style.display = 'none';
        deferredPrompt.prompt();

        deferredPrompt.userChoice.then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('‚úÖ App installed');
          } else {
            console.log('‚ùå App installation dismissed');

            // Optional: Show the button again later
            setTimeout(() => {
              if (deferredPrompt) {
                installButton.style.display = 'block';
              }
            }, 30000); // Retry after 30 seconds
          }
          deferredPrompt = null;
        });
      });
    });
  } else {
    console.log('üì± App already installed');
  }
</script>

      <script>
  const searchInput = document.getElementById("searchBar");

  // Create a 'no results' message and hide it initially
  const noResultsMessage = document.createElement("p");
  noResultsMessage.id = "noResultsMessage";
  noResultsMessage.textContent = "üîç No matching content found.";
  noResultsMessage.style.textAlign = "center";
  noResultsMessage.style.color = "#b71c1c";
  noResultsMessage.style.fontWeight = "bold";
  noResultsMessage.style.display = "none";
  searchInput.insertAdjacentElement("afterend", noResultsMessage);

  searchInput.addEventListener("input", function () {
    const query = this.value.toLowerCase();
    const allLists = document.querySelectorAll("ul");
    let totalVisible = 0;

    allLists.forEach((list) => {
      const items = list.querySelectorAll("li");

      items.forEach((item) => {
        const text = item.textContent.toLowerCase();
        const match = text.includes(query);
        item.style.display = match ? "block" : "none";
        if (match) totalVisible++;
      });
    });

    // Show or hide the no results message
    noResultsMessage.style.display = totalVisible === 0 ? "block" : "none";
  });
</script>
      <script>
  fetch('vocabulary.json')
    .then(res => res.json())
    .then(data => {
      const count = data.length;
      document.getElementById("vocab-count").innerText = `${count} words inside`;
    })
    .catch(() => {
      document.getElementById("vocab-count").innerText = `Vocabulary`;
    });
</script>  

      <script>
  fetch('abbreviations.json')
    .then(res => res.json())
    .then(data => {
      const count = data.length;
      document.getElementById("abbrev-count").innerText = `${count} terms inside`;
    })
    .catch(() => {
      document.getElementById("abbrev-count").innerText = `Abbreviations`;
    });
</script>

<!-- ‚úÖ Supabase + Profile Logic (No Refresh) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const supabase = window.supabase.createClient(
    'https://fczslywprowqzgwcwhzu.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZjenNseXdwcm93cXpnd2N3aHp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzU1MDEsImV4cCI6MjA2NzQxMTUwMX0.IWQ1kwEPRrigvYurWRbuHQWRrHZU9K-3bbYgdH745zk' // replace with actual anon key
  );

  const profileBtn = document.getElementById('profileBtn');
  const profileModal = document.getElementById('profileModal');
  const rippleEffect = document.getElementById('rippleEffect');

  function triggerRippleEffect() {
    if (!rippleEffect) return;
    rippleEffect.style.opacity = '1';
    setTimeout(() => {
      rippleEffect.style.opacity = '0';
    }, 400);
  }

  supabase.auth.onAuthStateChange((event, session) => {
    if (session) {
      localStorage.setItem('supabaseSession', JSON.stringify(session));
    } else {
      localStorage.removeItem('supabaseSession');
    }
  });

  function isSessionExpired(session) {
    const now = Math.floor(Date.now() / 1000);
    return session.expires_at && session.expires_at < now;
  }
  async function loadUser() {
    const greetingEl = document.getElementById('greeting');
    const welcomeUser = document.getElementById('welcomeUser');
    const modalName = document.getElementById('modalName');
    const modalEmail = document.getElementById('modalEmail');

    let sessionData = localStorage.getItem('supabaseSession');
    let session = sessionData ? JSON.parse(sessionData) : null;

    if (!session || isSessionExpired(session)) {
      const { data } = await supabase.auth.getSession();
      session = data?.session;
      if (session) {
        localStorage.setItem('supabaseSession', JSON.stringify(session));
      } else {
        return window.location.href = 'login.html';
      }
    }

    const userId = session.user.id;
    const userEmail = session.user.email;
    let fullName = localStorage.getItem('full_name');

    if (!fullName) {
      const { data: userData, error } = await supabase
  .from('user')
  .select('full_name')
  .eq('id', userId)
  .single();

if (!error && userData?.full_name) {
  fullName = userData.full_name;
  localStorage.setItem('full_name', fullName);
}

    }
    if (fullName) {
      if (greetingEl) greetingEl.textContent = `Welcome, ${fullName}!`;
      if (welcomeUser) welcomeUser.textContent = `Hello ${fullName}, we're glad to have you on the Nursing Nexus Portal üëã`;
      if (modalName) modalName.textContent = fullName;
    }

    if (modalEmail) modalEmail.textContent = userEmail;

    document.getElementById('loading')?.style.setProperty('display', 'none');
    document.getElementById('app')?.style.setProperty('display', 'block');
  }

  setTimeout(loadUser, 50);

  async function logout() {
    const confirmed = confirm("Are you sure you want to log out?");
  if (!confirmed) return;

    await supabase.auth.signOut();
    localStorage.removeItem('supabaseSession');
    window.location.href = 'login.html';
  }

  // ‚ùå Delete Account with confirmation modal
  function showConfirmModal(callback) {
    const modal = document.getElementById('confirmModal');
    modal.style.display = 'flex';

    const yesBtn = document.getElementById('confirmYes');
    const noBtn = document.getElementById('confirmNo');

    const cleanup = () => {
      modal.style.display = 'none';
      yesBtn.removeEventListener('click', onConfirm);
      noBtn.removeEventListener('click', onCancel);
    };

    const onConfirm = () => {
      cleanup();
      callback(true);
    };

    const onCancel = () => {
      cleanup();
      callback(false);
    };

    yesBtn.addEventListener('click', onConfirm);
    noBtn.addEventListener('click', onCancel);
  }

  async function deleteAccount() {
    triggerRippleEffect();

    showConfirmModal(async (confirmed) => {
      if (!confirmed) return alert("Account deletion cancelled.");

      const { data: { user } } = await supabase.auth.getUser();
      if (!user) return alert("You're not logged in.");

      const { error } = await supabase.from('user').delete().eq('id', user.id);
      if (error) return alert("‚ùå Error deleting user.");

      alert("‚úÖ Account deleted. Logging out...");
      await supabase.auth.signOut();
      localStorage.clear();
      window.location.href = 'login.html';
    });
  }

  // üßë Profile Modal Toggle
  profileBtn?.addEventListener('click', (e) => {
    profileModal.style.display = profileModal.style.display === 'block' ? 'none' : 'block';
    triggerRippleEffect();
    e.stopPropagation();
  });

  // ‚õî Close modal on outside click
  document.addEventListener('click', (e) => {
    if (!profileModal.contains(e.target) && e.target !== profileBtn) {
      profileModal.style.display = 'none';
    }
  });

  // ‚ú® Animate profile button only
  function animateButton(id) {
    const btn = document.getElementById(id);
    if (!btn) return;
    btn.addEventListener('mouseenter', () => btn.style.boxShadow = '0 0 15px #8000ff');
    btn.addEventListener('mouseleave', () => btn.style.boxShadow = '0 0 8px rgba(0,0,0,0.3)');
    btn.addEventListener('mousedown', () => btn.style.transform = 'scale(0.95)');
    btn.addEventListener('mouseup', () => btn.style.transform = 'scale(1)');
  }

  animateButton('profileBtn');
</script>


<script>
  const noticeList = document.getElementById('notices');
  const toggleBtn = document.getElementById('toggleNotice');
  const toast = document.getElementById("toast");
  const badge = document.getElementById('newBadge');
  const notifySound = document.getElementById('notifySound');

  toggleBtn.addEventListener('click', () => {
    noticeList.classList.toggle('show');
    toggleBtn.textContent = noticeList.classList.contains('show') ? 'Hide Notices' : 'Show Notices';
    if (noticeList.classList.contains('show')) {
      noticeList.style.maxHeight = "1000px";
      noticeList.style.display = "block";
      badge.style.display = "none";
      // When user reads, mark as seen
      const allIDs = Array.from(noticeList.querySelectorAll('li')).map(li => li.dataset.id);
      localStorage.setItem('seenNotices', JSON.stringify(allIDs));
    } else {
      noticeList.style.maxHeight = "0";
      setTimeout(() => { noticeList.style.display = "none"; }, 400);
    }
  });

  function playSound() {
    notifySound.play().catch(() => {
      document.body.addEventListener('click', () => notifySound.play(), { once: true });
    });
  }

  function showToast(msg) {
    toast.textContent = msg;
    toast.style.visibility = "visible";
    toast.className = "show";
    setTimeout(() => {
      toast.style.visibility = "hidden";
      toast.className = toast.className.replace("show", "");
    }, 3000);
  }

  function fetchNotices() {
    fetch('notices.json?nocache=' + Date.now())
      .then(res => res.json())
      .then(data => {
        const seen = JSON.parse(localStorage.getItem('seenNotices') || '[]');
        const newOnes = [];

        noticeList.innerHTML = "";
        data.forEach(item => {
          const li = document.createElement('li');
          li.innerHTML = `<strong>${item.date}:</strong> ${item.message}`;
          li.dataset.id = item.id;
          noticeList.appendChild(li);

          if (!seen.includes(item.id)) {
            newOnes.push(item.id);
          }
        });

        if (newOnes.length > 0) {
          badge.style.display = 'inline';
          playSound();
          showToast("HEY, üì¢ New notice available! KINDLY CHECK THE NOTICE TAB AT THE TOP TO STOP THE NOTIFICATION SOUND AND POP UP.");
        }

        if (noticeList.classList.contains('show')) {
          localStorage.setItem('seenNotices', JSON.stringify(data.map(n => n.id)));
          badge.style.display = "none";
        }
      })
      .catch(err => {
        console.error("Notice loading error:", err);
        noticeList.innerHTML = "<li>Failed to load notices.</li>";
      });
  }

  fetchNotices();
  setInterval(fetchNotices, 10000); // repeat every 10 sec
</script>
      <script src="script.js" defer></script>

    <script>
  const refreshBtn = document.getElementById('refreshBtn');
  const shockwave = document.getElementById('shockwave');

  refreshBtn.addEventListener('click', () => {
    // Reset shockwave
    shockwave.style.transition = 'none';
    shockwave.style.opacity = '1';
    shockwave.style.transform = 'scale(1)';
    
    // Force reflow
    void shockwave.offsetWidth;

    // Trigger animation
    shockwave.style.transition = 'transform 0.6s ease-out, opacity 0.6s ease-out';
    shockwave.style.transform = 'scale(8)';
    shockwave.style.opacity = '0';

    // Then refresh after short delay
    setTimeout(() => {
      location.reload(true); // force full reload
    }, 500);
  });
</script>
<footer style="text-align: center; margin-top: 50px;">
  <p>&copy; 2025 Heartique Nursing. All rights reserved. |
    <a href="about.html">About</a> |
    <a href="contact.html">Contact</a> |
    <a href="privacy.html">Privacy Policy</a>
  </p>
</footer>

</body>
</html>









